
# Configure a default setup of Home Assistant (frontend, api, etc)
default_config:

# Uncomment this if you are using SSL/TLS, running in Docker container, etc.
http:
  base_url: https://marionguillaume.fr
  server_port: 8123
  ssl_certificate: /ssl/fullchain.pem
  ssl_key: /ssl/privkey.pem

# Text to speech
tts:
  - platform: google_translate

#lovelace:
#  mode: yaml

webhook:

zigbee2mqtt_networkmap:
  #topic: your topic (optional, default zigbee2mqtt)
panel_iframe:
  networkmap:
    title: 'Zigbee Map'
    url: '/local/community/zigbee2mqtt_networkmap/map.html'
    icon: 'mdi:graphql'

climate:
  #Chambre Diane
  - platform: generic_thermostat
    name: climateDiane
    heater: switch.switch_state_revert1
    target_sensor: sensor.0x00158d000411b5e5_temperature
    min_temp: 10
    max_temp: 25
    ac_mode: false
    target_temp: 19
    cold_tolerance: 0.2
    hot_tolerance: 0.2
    min_cycle_duration:
      seconds: 5
    keep_alive:
      minutes: 3
    initial_hvac_mode: "heat"
    away_temp: 14
    precision: 0.1
  #Chambre parentale
  - platform: generic_thermostat
    name: climateParents
    heater: switch.switch_state_revert2
    target_sensor: sensor.0x00158d00045abd39_temperature
    min_temp: 10
    max_temp: 25
    ac_mode: false
    target_temp: 19
    cold_tolerance: 0.2
    hot_tolerance: 0.2
    min_cycle_duration:
      seconds: 5
    keep_alive:
      minutes: 3
    initial_hvac_mode: "heat"
    away_temp: 14
    precision: 0.1
  #Chambre amis
  - platform: generic_thermostat
    name: climateAmis
    heater: switch.switch_state_revert3
    target_sensor: sensor.0x00158d0004210843_temperature
    min_temp: 10
    max_temp: 25
    ac_mode: false
    target_temp: 19
    cold_tolerance: 0.2
    hot_tolerance: 0.2
    min_cycle_duration:
      seconds: 5
    keep_alive:
      minutes: 3
    initial_hvac_mode: "heat"
    away_temp: 14
    precision: 0.1
  #Salon
  - platform: generic_thermostat
    name: climateSalon
    heater: switch.switch_state_revert4
    target_sensor: sensor.0x00158d000465c103_temperature
    min_temp: 10
    max_temp: 25
    ac_mode: false
    target_temp: 19
    cold_tolerance: 0.2
    hot_tolerance: 0.2
    min_cycle_duration:
      seconds: 5
    keep_alive:
      minutes: 3
    initial_hvac_mode: "heat"
    away_temp: 14
    precision: 0.1

switch:
  - platform: template
    switches:
      #Aqara_Relay1
      switch_state_revert1:
        value_template: "{{ is_state('switch.0x00158d000444ed09_switch_l2', 'off')}}"
        turn_on:
          service: switch.turn_off
          data:
            entity_id: switch.0x00158d000444ed09_switch_l2
        turn_off:
          service: switch.turn_on
          data:
            entity_id: switch.0x00158d000444ed09_switch_l2
      switch_state_revert2:
        value_template: "{{ is_state('switch.0x00158d000444ed09_switch_l1', 'off')}}"
        turn_on:
          service: switch.turn_off
          data:
            entity_id: switch.0x00158d000444ed09_switch_l1
        turn_off:
          service: switch.turn_on
          data:
            entity_id: switch.0x00158d000444ed09_switch_l1
      #Aqara_Relay2
      switch_state_revert3:
        value_template: "{{ is_state('switch.0x00158d00045c20e3_switch_l2', 'off')}}"
        turn_on:
          service: switch.turn_off
          data:
            entity_id: switch.0x00158d00045c20e3_switch_l2
        turn_off:
          service: switch.turn_on
          data:
            entity_id: switch.0x00158d00045c20e3_switch_l2
      switch_state_revert4:
        value_template: "{{ is_state('switch.0x00158d00045c20e3_switch_l1', 'off')}}"
        turn_on:
          service: switch.turn_off
          data:
            entity_id: switch.0x00158d00045c20e3_switch_l1
        turn_off:
          service: switch.turn_on
          data:
            entity_id: switch.0x00158d00045c20e3_switch_l1


sensor:
  - platform: linky
    username: !secret linky_username
    password: !secret linky_password
    peak_hours:
     - ["07:00","14:00"]
     - ["17:00","02:00"]
    peak_hours_cost: 0.1761
    offpeak_hours_cost: 0.1291


group: !include groups.yaml
automation: !include automations.yaml
script: !include scripts.yaml
scene: !include scenes.yaml
frontend:
  themes: !include themes.yaml
